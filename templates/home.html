{% extends "base.html" %}


{% block js %}
<script src="{{ url_for('static', filename='js/timbre.js') }}"></script>
<script src="{{ url_for('static', filename='js/keyboard.js') }}"></script>
<script>
    var synth = T("OscGen", {wave:"saw", mul:0.25}).play();

    var keydict = T("ndict.key");
    var midicps = T("midicps");
    T("keyboard").on("keydown", function(e) {
      var midi = keydict.at(e.keyCode);
      if (midi) {
        var freq = midicps.at(midi);
        synth.noteOnWithFreq(freq, 100);
      }
    }).on("keyup", function(e) {
      var midi = keydict.at(e.keyCode);
      if (midi) {
        synth.noteOff(midi, 100);
      }
    }).start();
</script>
{% endblock %}
{% block main %}
<img src="{{ url_for('static', filename='img/keymap.png') }}">
{% endblock %}